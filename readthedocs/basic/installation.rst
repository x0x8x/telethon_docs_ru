.. _installation:

============
Установка
============

Telethon - это библиотека для Python, что означает, что вы должны скачать и установить
Python из https://www.python.org/downloads/ Если вы этого еще не сделали. После установки
запустите:

.. code-block:: sh

    pip3 install -U telethon --user

Чтобы установить или обновить библиотеку последней версии.


Установка dev версий
====================

Если вам нужна *последняя* не релизнутая версия,
вы можете использовать эту команду:

.. code-block:: sh

    pip3 install -U https://github.com/LonamiWebs/Telethon/archive/master.zip --user

.. note::
    В dev версиях могут быть баги, и они не рекомендовынны для продакшна.
    Тем не менее, когда вы `делаете бег-репорт`__, вы должны проверить,
    остался ли баг в последней версии

.. __: https://github.com/LonamiWebs/Telethon/issues/


Подтверждение
=============

Чтобы подтвердить, что библиотека установилась корректно, запустите слудующую команду:

.. code-block:: sh

    python3 -c "import telethon; print(telethon.__version__)"

Версия библиотеки будет показана.


Необязательные зависимости
==========================

Если cryptg_ установлен, **библиотека будет работать куда быстрее**, т.к.
шифровка и разшифровка будет делаться в C вместо Python. Если вашему коду
приходится работать с большим количеством апдейтов, или вы загружаете/выгружаете
много файлов, вы ызаметите сильное увеличение скорости (от сотен килобоайт
в секунду до нескольких мегебайт в секунду, если ваше соеденение позволяет это)
Если cryptg_ не установлен, pyaes_ будет использоваться (который написон на Python,
что значит, что он куда медленнее)

Если pillow_ установлен, большие картинки будут автоматически изменены
в размере, чтобы Telegram не отвечал ошибкой "invalid image".
Оффициальные клиенты делают тоже самое.

Если aiohttp_ установлен, библиотека будет автоматически загружать
:tl:`WebDocument` медиа файлы (иначе вы получите ошибку).

Если hachoir_ установлен, н будет автоматически доставать метадату из файлов
при отправке документов. Телеграм использует эту информацию для показа
исполлнителя песен, артиста, названия, длительности, а так же для видео
(включая размер).
Иначе, (по стандарту) они будут пустыми, и вы можете прописать аттрибуты
вручную.

.. note::
    Некоторым модулям нужны дополнителоьные зависимости до установки
    через ``pip``. Если у вас ``apt`` система, установите самые частые
    зависимости:

    .. code-block:: sh

        apt update
        apt install clang lib{jpeg-turbo,webp}-dev python{,-dev} zlib-dev
        pip install -U --user setuptools
        pip install -U --user telethon cryptg pillow

    Спасибо `@bb010g`_ за этот список.

.. _cryptg: https://github.com/cher-nov/cryptg
.. _pyaes: https://github.com/ricmoo/pyaes
.. _pillow: https://python-pillow.org
.. _aiohttp: https://docs.aiohttp.org
.. _hachoir: https://hachoir.readthedocs.io
.. _@bb010g: https://static.bb010g.com
